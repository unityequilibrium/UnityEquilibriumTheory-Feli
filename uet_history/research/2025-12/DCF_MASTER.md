# Documentary Consistency Framework (DCF)
## UET Platform - Master Documentation Standard v1.0

> **à¸à¸à¹€à¸«à¸¥à¹‡à¸:** Doc à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸œà¹ˆà¸²à¸™ DCF = à¸«à¹‰à¸²à¸¡à¹€à¸‚à¸µà¸¢à¸™à¹à¸œà¸™/à¹‚à¸„à¹‰à¸”  
> **à¸«à¸¥à¸±à¸à¸„à¸´à¸”:** A â†’ B â†’ C â†’ D â†’ E à¸•à¹‰à¸­à¸‡à¹„à¸«à¸¥à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡ à¹„à¸¡à¹ˆà¸‚à¸±à¸”à¹à¸¢à¹‰à¸‡

---

## ğŸ“š The A â†’ E Framework

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DOCUMENTATION CONSISTENCY FRAMEWORK                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚    A    â”‚â”€â”€â”€â–¶â”‚    B    â”‚â”€â”€â”€â–¶â”‚    C    â”‚â”€â”€â”€â–¶â”‚    D    â”‚â”€â”€â”€â–¶â”‚    E    â”‚  â”‚
â”‚   â”‚  UX/UI  â”‚    â”‚Frontend â”‚    â”‚Backend  â”‚    â”‚  Flow   â”‚    â”‚Database â”‚  â”‚
â”‚   â”‚ Intent  â”‚    â”‚Structureâ”‚    â”‚Contract â”‚    â”‚ Engine  â”‚    â”‚Persist  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚                                                              â”‚      â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ E â†’ A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                        (Replay / Reopen verification)                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Layer Definitions

### A â€” UX / UI INTENT

> **à¸„à¸³à¸–à¸²à¸¡:** à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸„à¸´à¸”à¸­à¸°à¹„à¸£ / à¹€à¸«à¹‡à¸™à¸­à¸°à¹„à¸£ / à¸—à¸³à¸­à¸°à¹„à¸£à¹„à¸”à¹‰

| Covers | Examples |
|--------|----------|
| User expectations | "à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸„à¸²à¸”à¸«à¸§à¸±à¸‡à¸§à¹ˆà¸²..." |
| Page layouts | Home, Gallery, Lab layouts |
| Interactions | Click, drag, hover behaviors |
| Forbidden actions | "à¸«à¹‰à¸²à¸¡à¸—à¸³ X à¹€à¸¡à¸·à¹ˆà¸­ Y" |

### B â€” FRONTEND STRUCTURE

> **à¸„à¸³à¸–à¸²à¸¡:** Component à¸­à¸°à¹„à¸£ / State à¸­à¸°à¹„à¸£ / Action à¸­à¸°à¹„à¸£

| Covers | Examples |
|--------|----------|
| Components | TopNav, LabShell, SimulationHUD |
| State management | Zustand stores, Context |
| Action IDs | data-action-id values |
| Layout constants | Widths, z-indices |

### C â€” BACKEND CONTRACT

> **à¸„à¸³à¸–à¸²à¸¡:** API à¸­à¸°à¹„à¸£ / Validate à¸­à¸°à¹„à¸£ / Return à¸­à¸°à¹„à¸£

| Covers | Examples |
|--------|----------|
| API endpoints | /api/runs, /api/projects |
| Request schemas | Body, params, headers |
| Response schemas | Success, error formats |
| Validation rules | Required fields, ranges |

### D â€” FLOW / ENGINE LOGIC

> **à¸„à¸³à¸–à¸²à¸¡:** à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸«à¸¥à¸¢à¸±à¸‡à¹„à¸‡ / Engine à¸—à¸³à¸­à¸°à¹„à¸£ / Determinism

| Covers | Examples |
|--------|----------|
| Data flow | Input â†’ Engine â†’ Output |
| Simulation logic | SimCoreV4, equations |
| Test gates | L0-L5 verification |
| Determinism | Same input = same output |

### E â€” DATABASE / PERSISTENCE

> **à¸„à¸³à¸–à¸²à¸¡:** à¹€à¸à¹‡à¸šà¸­à¸°à¹„à¸£ / à¹„à¸¡à¹ˆà¹€à¸à¹‡à¸šà¸­à¸°à¹„à¸£ / Replay à¹„à¸”à¹‰à¹„à¸«à¸¡

| Covers | Examples |
|--------|----------|
| Schema | Tables, columns, types |
| Persistence policy | What to save, when |
| Replay rules | How to restore state |
| History | What's tracked |

---

## ğŸ“ Required Directory Structure

```
docs/
â”œâ”€â”€ DCF/                          # Documentary Consistency Framework
â”‚   â”œâ”€â”€ DCF_MASTER.md             # This file
â”‚   â”œâ”€â”€ DCF_AUDIT.md              # Verification results
â”‚   â””â”€â”€ DCF_CHANGELOG.md          # Changes across layers
â”‚
â”œâ”€â”€ A_UX_UI/
â”‚   â”œâ”€â”€ intent.md                 # User expectations
â”‚   â”œâ”€â”€ page_map.md               # All pages and layouts
â”‚   â”œâ”€â”€ interaction_rules.md      # Click/drag/hover behaviors
â”‚   â””â”€â”€ forbidden_actions.md      # Things users cannot do
â”‚
â”œâ”€â”€ B_FRONTEND/
â”‚   â”œâ”€â”€ component_map.md          # All components
â”‚   â”œâ”€â”€ state_model.md            # Zustand/Context state
â”‚   â”œâ”€â”€ action_map.md             # All action_ids
â”‚   â””â”€â”€ layout_contract.md        # Layout constants
â”‚
â”œâ”€â”€ C_BACKEND/
â”‚   â”œâ”€â”€ api_contract.md           # All API endpoints
â”‚   â”œâ”€â”€ validation_rules.md       # Input validation
â”‚   â””â”€â”€ error_handling.md         # Error responses
â”‚
â”œâ”€â”€ D_FLOW_ENGINE/
â”‚   â”œâ”€â”€ flow_diagram.md           # Data flow diagrams
â”‚   â”œâ”€â”€ runner_logic.md           # Simulation runner
â”‚   â”œâ”€â”€ test_gate_logic.md        # L0-L5 gates
â”‚   â””â”€â”€ determinism_rules.md      # Reproducibility rules
â”‚
â”œâ”€â”€ E_DATABASE/
â”‚   â”œâ”€â”€ schema.md                 # DB schema
â”‚   â”œâ”€â”€ persistence_policy.md     # What to persist
â”‚   â””â”€â”€ replay_rules.md           # How to replay/restore
â”‚
â””â”€â”€ TRACEABILITY/
    â”œâ”€â”€ a_to_b.md                 # UX â†’ Frontend mapping
    â”œâ”€â”€ b_to_c.md                 # Frontend â†’ Backend mapping
    â”œâ”€â”€ c_to_d.md                 # Backend â†’ Engine mapping
    â”œâ”€â”€ d_to_e.md                 # Engine â†’ Database mapping
    â””â”€â”€ e_to_a.md                 # Database â†’ UX (reopen) mapping
```

---

## âœ… Verification Phases

### Phase V1: A â†” B (UX/UI â†” Frontend)

**à¸„à¸³à¸–à¸²à¸¡:**
- à¸—à¸¸à¸ interaction à¹ƒà¸™ A à¸¡à¸µ component à¹ƒà¸™ B?
- à¸—à¸¸à¸à¸›à¸¸à¹ˆà¸¡à¹ƒà¸™ A à¸¡à¸µ action_id à¹ƒà¸™ B?
- **à¸¡à¸µ component à¹ƒà¸™ B à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸¡à¸µà¹ƒà¸™ A à¹„à¸«à¸¡?** (à¸­à¸±à¸™à¸•à¸£à¸²à¸¢!)

**Checklist:**
```
â–¡ A à¸£à¸°à¸šà¸¸à¸›à¸¸à¹ˆà¸¡/interaction à¸„à¸£à¸š
â–¡ B à¸¡à¸µ component à¸£à¸­à¸‡à¸£à¸±à¸šà¸—à¸¸à¸à¸­à¸±à¸™
â–¡ à¹„à¸¡à¹ˆà¸¡à¸µ component "à¸¥à¸­à¸¢ à¹†" à¸—à¸µà¹ˆ A à¹„à¸¡à¹ˆà¹€à¸„à¸¢à¸à¸¹à¸”à¸–à¸¶à¸‡
```

âŒ **FAIL:** B à¸¡à¸µà¸‚à¸­à¸‡à¸—à¸µà¹ˆ A à¹„à¸¡à¹ˆà¸à¸¹à¸” = Doc à¹„à¸¡à¹ˆà¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡

---

### Phase V2: B â†” C (Frontend â†” Backend)

**à¸„à¸³à¸–à¸²à¸¡:**
- à¸—à¸¸à¸ action à¹ƒà¸™ B à¸¢à¸´à¸‡ API à¹„à¸«à¸¡?
- à¸–à¹‰à¸²à¸¢à¸´à¸‡ â†’ C à¸¡à¸µ API à¸£à¸­à¸‡à¸£à¸±à¸š?
- à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸¢à¸´à¸‡ â†’ à¸•à¹‰à¸­à¸‡à¸£à¸°à¸šà¸¸à¸§à¹ˆà¸² local-only

**Checklist:**
```
â–¡ à¸—à¸¸à¸ action à¹ƒà¸™ B à¸£à¸°à¸šà¸¸ destination (local / API)
â–¡ à¸—à¸¸à¸ API à¹ƒà¸™ C à¸¡à¸µ caller à¹ƒà¸™ B
â–¡ à¹„à¸¡à¹ˆà¸¡à¸µ API à¸—à¸µà¹ˆ "à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸§à¹ˆà¸²à¹ƒà¸„à¸£à¹€à¸£à¸µà¸¢à¸"
```

âŒ **FAIL:** API à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸¡à¸µ caller = à¹€à¸­à¸à¸ªà¸²à¸£à¸¡à¸±à¹ˆà¸§

---

### Phase V3: C â†” D (Backend â†” Flow/Engine)

**à¸„à¸³à¸–à¸²à¸¡:**
- Backend à¸—à¸³à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¸­à¸°à¹„à¸£?
- Flow/Engine à¸—à¸³à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¸­à¸°à¹„à¸£?
- à¹ƒà¸„à¸£à¹€à¸›à¹‡à¸™ source of truth?

**Checklist:**
```
â–¡ à¸—à¸¸à¸ API à¹ƒà¸™ C à¸Šà¸µà¹‰à¹„à¸› logic à¹ƒà¸™ D
â–¡ D à¹„à¸¡à¹ˆà¸£à¸±à¸š input à¸—à¸µà¹ˆ C à¹„à¸¡à¹ˆ validate
â–¡ Rule à¸ªà¸³à¸„à¸±à¸ (determinism, gate) à¸–à¸¹à¸à¸à¸¹à¸”à¸•à¸£à¸‡à¸à¸±à¸™
```

âŒ **FAIL:** C à¸à¸±à¸š D à¸à¸¹à¸”à¸„à¸™à¸¥à¸°à¹€à¸£à¸·à¹ˆà¸­à¸‡ = à¸£à¸°à¸šà¸šà¸à¸±à¸‡à¹à¸™à¹ˆà¸™à¸­à¸™

---

### Phase V4: D â†” E (Flow â†” Database)

**à¸„à¸³à¸–à¸²à¸¡:**
- Flow à¹„à¸«à¸™à¸•à¹‰à¸­à¸‡ persist?
- Flow à¹„à¸«à¸™à¸«à¹‰à¸²à¸¡ persist?
- Replay à¹€à¸­à¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸à¹„à¸«à¸™?

**Checklist:**
```
â–¡ à¸—à¸¸à¸ persistence decision à¹ƒà¸™ D à¸¡à¸µà¸„à¸³à¸•à¸­à¸šà¹ƒà¸™ E
â–¡ à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¸„à¸±à¸à¸—à¸µà¹ˆ D à¹ƒà¸Šà¹‰ à¹à¸•à¹ˆ E à¹„à¸¡à¹ˆà¹€à¸à¹‡à¸š
â–¡ Replay rules à¹€à¸‚à¸µà¸¢à¸™à¸Šà¸±à¸”
```

âŒ **FAIL:** D à¹ƒà¸Šà¹‰à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆ E à¹„à¸¡à¹ˆà¹€à¸à¹‡à¸š = Replay à¸à¸±à¸‡

---

### Phase V5: E â†” A (Database â†” UX/UI)

**à¸„à¸³à¸–à¸²à¸¡:**
- UX à¸šà¸­à¸à¸§à¹ˆà¸²à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ "à¸ˆà¸°à¹€à¸«à¹‡à¸™à¸­à¸°à¹„à¸£à¸•à¸­à¸™à¸à¸¥à¸±à¸šà¸¡à¸²"?
- DB à¹€à¸à¹‡à¸šà¸à¸­à¹„à¸«à¸¡à¹ƒà¸«à¹‰ UX à¹à¸ªà¸”à¸‡à¸ªà¸´à¹ˆà¸‡à¸™à¸±à¹‰à¸™?

**Checklist:**
```
â–¡ UX à¸—à¸¸à¸ requirement à¸¡à¸µ field à¸£à¸­à¸‡à¸£à¸±à¸šà¹ƒà¸™ DB
â–¡ à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™ DB à¸—à¸µà¹ˆ UX à¹„à¸¡à¹ˆà¹€à¸„à¸¢à¹ƒà¸Šà¹‰à¹€à¸¥à¸¢
â–¡ History / Gallery / Reopen à¸­à¸˜à¸´à¸šà¸²à¸¢à¹„à¸”à¹‰à¸ˆà¸²à¸ Doc
```

âŒ **FAIL:** UX à¸ªà¸±à¸à¸à¸² à¹à¸•à¹ˆ DB à¹€à¸à¹‡à¸šà¹„à¸¡à¹ˆà¸„à¸£à¸š = à¹‚à¸à¸«à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰

---

## ğŸ”— Transitive Consistency (A â†’ C â†’ E)

**à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:**
```
UX à¸šà¸­à¸: "à¸›à¸¸à¹ˆà¸¡à¸™à¸µà¹‰à¸ˆà¸³à¸„à¹ˆà¸²à¹„à¸”à¹‰"
   â†’ Backend à¸¡à¸µ API save à¹„à¸«à¸¡?
   â†’ DB à¹€à¸à¹‡à¸š field à¸™à¸µà¹‰à¸ˆà¸£à¸´à¸‡à¹„à¸«à¸¡?
```

**Checklist:**
```
â–¡ A â†’ C semantics à¸•à¸£à¸‡à¸à¸±à¸™
â–¡ C â†’ E semantics à¸•à¸£à¸‡à¸à¸±à¸™
â–¡ A â†’ E à¹„à¸¡à¹ˆà¸‚à¸±à¸”à¸à¸±à¸™
```

âš ï¸ **à¸–à¹‰à¸² Aâ†”B à¸œà¹ˆà¸²à¸™, Bâ†”C à¸œà¹ˆà¸²à¸™ à¹à¸•à¹ˆ Aâ†”E à¸à¸±à¸‡ = à¹€à¸­à¸à¸ªà¸²à¸£à¸¢à¸±à¸‡à¹ƒà¸Šà¹‰à¹„à¸¡à¹ˆà¹„à¸”à¹‰**

---

## ğŸš¦ Documentary Gate

### DOC PASS CRITERIA

à¹€à¸­à¸à¸ªà¸²à¸£à¸ˆà¸°à¸–à¸·à¸­à¸§à¹ˆà¸² "à¸à¸£à¹‰à¸­à¸¡à¹„à¸› implement" à¸à¹‡à¸•à¹ˆà¸­à¹€à¸¡à¸·à¹ˆà¸­:

```
âœ” Aâ€“Bâ€“Câ€“Dâ€“E à¸„à¸£à¸šà¸—à¸¸à¸à¸ªà¹ˆà¸§à¸™
âœ” à¸—à¸¸à¸ Phase V1â€“V5 à¸œà¹ˆà¸²à¸™
âœ” à¹„à¸¡à¹ˆà¸¡à¸µ orphan concept (à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¹à¸„à¹ˆà¸Šà¸±à¹‰à¸™à¹€à¸”à¸µà¸¢à¸§)
âœ” à¹„à¸¡à¹ˆà¸¡à¸µ contradiction à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸Šà¸±à¹‰à¸™
```

### DOC FAIL = STOP

```
âŒ à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸œà¹ˆà¸²à¸™ â†’ à¸«à¹‰à¸²à¸¡à¹€à¸‚à¸µà¸¢à¸™à¹à¸œà¸™
âŒ à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸œà¹ˆà¸²à¸™ â†’ à¸«à¹‰à¸²à¸¡à¹€à¸‚à¸µà¸¢à¸™à¹‚à¸„à¹‰à¸”
âŒ à¸•à¹‰à¸­à¸‡à¹à¸à¹‰ Doc à¸à¹ˆà¸­à¸™
```

---

## ğŸ“Š Current Status Mapping

### Existing Docs â†’ DCF Layers

| Existing Doc | DCF Layer | Status |
|--------------|-----------|--------|
| UI_BLUEPRINT.md | A | âš ï¸ Partial |
| LAB_UI_DESIGN_SPEC.md | A + B | âš ï¸ Mixed |
| COMPONENT_REGISTRY.md | B | âš ï¸ Partial |
| BUTTON_ACTION_IDS.md | B | âœ… Good |
| SETTINGS_CONTRACT.md | B | âœ… Good |
| API_REFERENCE.md | C | âœ… Good |
| BACKEND_ARCHITECTURE.md | C + D | âš ï¸ Mixed |
| SMART_SIMULATION_DESIGN.md | D | âš ï¸ Partial |
| DATABASE_SCHEMA.md | E | âœ… Good |
| TRACEABILITY | - | âŒ Missing |

---

## ğŸ¯ Action Items

### P0 - Create Missing Docs

1. [ ] `A_UX_UI/intent.md`
2. [ ] `A_UX_UI/forbidden_actions.md`
3. [ ] `D_FLOW_ENGINE/determinism_rules.md`
4. [ ] `E_DATABASE/replay_rules.md`
5. [ ] All TRACEABILITY docs

### P1 - Reorganize Existing

1. [ ] Split mixed docs (LAB_UI_DESIGN_SPEC â†’ A + B)
2. [ ] Move content to correct layers
3. [ ] Add cross-references

### P2 - Run Verification

1. [ ] Phase V1: A â†” B
2. [ ] Phase V2: B â†” C
3. [ ] Phase V3: C â†” D
4. [ ] Phase V4: D â†” E
5. [ ] Phase V5: E â†” A

---

**Last Updated:** 2024-12-24
**Version:** 1.0
